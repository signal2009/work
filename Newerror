APP: User-Access-Management-Service Env: dev - 2024-07-01 19:14:16.883 [main] INFO  com.zaxxer.hikari.HikariDataSource[close:352] - HikariPool-3 - Shutdown completed.
Jul 01, 2024 7:14:16 PM org.apache.catalina.core.StandardService stopInternal
INFO: Stopping service [Tomcat]
APP: User-Access-Management-Service Env: dev - 2024-07-01 19:14:16.934 [main] ERROR o.s.boot.SpringApplication[reportFailure:851] - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'accessManagementDaoImpl': Unsatisfied dependency expressed through field 'parentRepository': Error creating bean with name 'parentEntityRepository' defined in com.wp.wdp.access.management.nap.repository.ParentEntityRepository defined in @EnableJpaRepositories declared on NapDataSourceConfig: Could not create query for public abstract org.springframework.data.domain.Page com.wp.wdp.access.management.nap.repository.ParentEntityRepository.findAllOrderbyMerchantCount(org.springframework.data.domain.Pageable,java.lang.String); Reason: Validation failed for query for method public abstract org.springframework.data.domain.Page com.wp.wdp.access.management.nap.repository.ParentEntityRepository.findAllOrderbyMerchantCount(org.springframework.data.domain.Pageable,java.lang.String)
 at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
 at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
 at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
 at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
 at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
 at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962)
 at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
 at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
 at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
 at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
 at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
 at org.springframework.boot.SpringApplication.run(SpringApplication.java:1354)
 at org.springframework.boot.SpringApplication.run(SpringApplication.java:1343)
 at com.wp.wdp.access.management.UserAccessManagementApplication.main(UserAccessManagementApplication.java:14)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:568)
 at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:91)
 at org.springframework.boot.loader.launch.Launcher.launch(Launcher.java:53)
 at org.springframework.boot.loader.launch.JarLauncher.main(JarLauncher.java:58)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'parentEntityRepository' defined in com.wp.wdp.access.management.nap.repository.ParentEntityRepository defined in @EnableJpaRepositories declared on NapDataSourceConfig: Could not create query for public abstract org.springframework.data.domain.Page com.wp.wdp.access.management.nap.repository.ParentEntityRepository.findAllOrderbyMerchantCount(org.springframework.data.domain.Pageable,java.lang.String); Reason: Validation failed for query for method public abstract org.springframework.data.domain.Page com.wp.wdp.access.management.nap.repository.ParentEntityRepository.findAllOrderbyMerchantCount(org.springframework.data.domain.Pageable,java.lang.String)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
 at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
 at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
 at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
 at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
 at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
 at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
 at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
 at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
 ... 27 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract org.springframework.data.domain.Page com.wp.wdp.access.management.nap.repository.ParentEntityRepository.findAllOrderbyMerchantCount(org.springframework.data.domain.Pageable,java.lang.String); Reason: Validation failed for query for method public abstract org.springframework.data.domain.Page com.wp.wdp.access.management.nap.repository.ParentEntityRepository.findAllOrderbyMerchantCount(org.springframework.data.domain.Pageable,java.lang.String)
 at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
 at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:115)
 at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:99)
 at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:88)
 at java.base/java.util.Optional.map(Optional.java:260)
 at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:88)
 at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:357)
 at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
 at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
 at org.springframework.data.util.Lazy.get(Lazy.java:113)
 at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
 at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
 at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
 ... 37 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract org.springframework.data.domain.Page com.wp.wdp.access.management.nap.repository.ParentEntityRepository.findAllOrderbyMerchantCount(org.springframework.data.domain.Pageable,java.lang.String)
 at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:100)
 at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:70)
 at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:60)
 at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:170)
 at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:252)
 at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:95)
 at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:111)
 ... 49 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.SyntaxException: At 1:262 and token ':', mismatched input ':', expecting one of the following tokens: ',', '.', ')', '[', '+', '-', '*', '/', '%', '||', BY, DAY, EPOCH, HOUR, MINUTE, MONTH, NANOSECOND, QUARTER, SECOND, WEEK, YEAR [SELECT new com.wp.wdp.access.management.model.request.ParentWithMerchantCountDTO(p,COUNT(r.merchantId)) FROM ParentEntity p LEFT JOIN MerchantRelationshipEntity r ON p.parentEntityId = r.parentEntityId GROUP BY p.id,p.parentEntityId ORDER BY COUNT(r.merchantId) :sortOrder]
 at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:143)
 at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:167)
 at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:173)
 at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:848)
 at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:753)
 at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:136)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
 at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
 at java.base/java.lang.reflect.Method.invoke(Method.java:568)
 at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:364)
 at jdk.proxy2/jdk.proxy2.$Proxy154.createQuery(Unknown Source)
 at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:94)
 ... 55 common frames omitted
Caused by: org.hibernate.query.SyntaxException: At 1:262 and token ':', mismatched input ':', expecting one of the following tokens: ',', '.', ')', '[', '+', '-', '*', '/', '%', '||', BY, DAY, EPOCH, HOUR, MINUTE, MONTH, NANOSECOND, QUARTER, SECOND, WEEK, YEAR [SELECT new com.wp.wdp.access.management.model.request.ParentWithMerchantCountDTO(p,COUNT(r.merchantId)) FROM ParentEntity p LEFT JOIN MerchantRelationshipEntity r ON p.parentEntityId = r.parentEntityId GROUP BY p.id,p.parentEntityId ORDER BY COUNT(r.merchantId) :sortOrder]
 at org.hibernate.query.hql.internal.StandardHqlTranslator$1.syntaxError(StandardHqlTranslator.java:108)
 at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)
 at org.antlr.v4.runtime.Parser.notifyErrorListeners(Parser.java:544)
 at org.antlr.v4.runtime.DefaultErrorStrategy.reportInputMismatch(DefaultErrorStrategy.java:327)
 at org.antlr.v4.runtime.DefaultErrorStrategy.reportError(DefaultErrorStrategy.java:139)
 at org.hibernate.grammars.hql.HqlParser.statement(HqlParser.java:367)
 at org.hibernate.query.hql.internal.StandardHqlTranslator.parseHql(StandardHqlTranslator.java:143)
 at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:67)
 at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:165)
 at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:147)
 at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:790)
 at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:840)
 ... 64 common frames omitted
